"use strict";(self.webpackChunkangular_playground=self.webpackChunkangular_playground||[]).push([[465],{465:(A,p,s)=>{s.r(p),s.d(p,{default:()=>g});var k=s(895),v=s(933),n=s(256),w=s(421),C=s(751),S=s(577),_=s(144),c=s(576),E=s(268);const F=["addListener","removeListener"],T=["addEventListener","removeEventListener"],x=["on","off"];function h(r,t,e,o){if((0,c.m)(e)&&(o=e,e=void 0),o)return h(r,t,e).pipe((0,E.Z)(o));const[i,d]=function L(r){return(0,c.m)(r.addEventListener)&&(0,c.m)(r.removeEventListener)}(r)?T.map(a=>f=>r[a](t,f,e)):function z(r){return(0,c.m)(r.addListener)&&(0,c.m)(r.removeListener)}(r)?F.map(y(r,t)):function D(r){return(0,c.m)(r.on)&&(0,c.m)(r.off)}(r)?x.map(y(r,t)):[];if(!i&&(0,_.z)(r))return(0,S.z)(a=>h(a,t,e))((0,w.Xf)(r));if(!i)throw new TypeError("Invalid event target");return new C.y(a=>{const f=(...u)=>a.next(1<u.length?u:u[0]);return i(f),()=>d(f)})}function y(r,t){return e=>o=>r[e](t,o)}var j=s(135),M=s(579);const b={now:()=>(b.delegate||Date).now(),delegate:void 0};class H extends M.x{constructor(t=1/0,e=1/0,o=b){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:o,_infiniteTimeWindow:i,_timestampProvider:d,_windowTime:a}=this;e||(o.push(t),!i&&o.push(d.now()+a)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:o,_buffer:i}=this,d=i.slice();for(let a=0;a<d.length&&!t.closed;a+=o?1:2)t.next(d[a]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:o,_infiniteTimeWindow:i}=this,d=(i?1:2)*t;if(t<1/0&&d<o.length&&o.splice(0,o.length-d),!i){const a=e.now();let f=0;for(let u=1;u<o.length&&o[u]<=a;u+=2)f=u;f&&o.splice(0,f+1)}}}const O={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"8e908c",token:"comment"},{foreground:"666969",token:"keyword.operator.class"},{foreground:"666969",token:"constant.other"},{foreground:"666969",token:"source.php.embedded.line"},{foreground:"c82829",token:"variable"},{foreground:"c82829",token:"support.other.variable"},{foreground:"c82829",token:"string.other.link"},{foreground:"c82829",token:"string.regexp"},{foreground:"c82829",token:"entity.name.tag"},{foreground:"c82829",token:"entity.other.attribute-name"},{foreground:"c82829",token:"meta.tag"},{foreground:"c82829",token:"declaration.tag"},{foreground:"c82829",token:"markup.deleted.git_gutter"},{foreground:"f5871f",token:"constant.numeric"},{foreground:"f5871f",token:"constant.language"},{foreground:"f5871f",token:"support.constant"},{foreground:"f5871f",token:"constant.character"},{foreground:"f5871f",token:"variable.parameter"},{foreground:"f5871f",token:"punctuation.section.embedded"},{foreground:"f5871f",token:"keyword.other.unit"},{foreground:"c99e00",token:"entity.name.class"},{foreground:"c99e00",token:"entity.name.type.class"},{foreground:"c99e00",token:"support.type"},{foreground:"c99e00",token:"support.class"},{foreground:"718c00",token:"string"},{foreground:"718c00",token:"constant.other.symbol"},{foreground:"718c00",token:"entity.other.inherited-class"},{foreground:"718c00",token:"markup.heading"},{foreground:"718c00",token:"markup.inserted.git_gutter"},{foreground:"3e999f",token:"keyword.operator"},{foreground:"3e999f",token:"constant.other.color"},{foreground:"4271ae",token:"entity.name.function"},{foreground:"4271ae",token:"meta.function-call"},{foreground:"4271ae",token:"support.function"},{foreground:"4271ae",token:"keyword.other.special-method"},{foreground:"4271ae",token:"meta.block-level"},{foreground:"4271ae",token:"markup.changed.git_gutter"},{foreground:"8959a8",token:"keyword"},{foreground:"8959a8",token:"storage"},{foreground:"8959a8",token:"storage.type"},{foreground:"ffffff",background:"c82829",token:"invalid"},{foreground:"ffffff",background:"4271ae",token:"meta.separator"},{foreground:"ffffff",background:"8959a8",token:"invalid.deprecated"},{foreground:"ffffff",token:"markup.inserted.diff"},{foreground:"ffffff",token:"markup.deleted.diff"},{foreground:"ffffff",token:"meta.diff.header.to-file"},{foreground:"ffffff",token:"meta.diff.header.from-file"},{background:"718c00",token:"markup.inserted.diff"},{background:"718c00",token:"meta.diff.header.to-file"},{background:"c82829",token:"markup.deleted.diff"},{background:"c82829",token:"meta.diff.header.from-file"},{foreground:"ffffff",background:"4271ae",token:"meta.diff.header.from-file"},{foreground:"ffffff",background:"4271ae",token:"meta.diff.header.to-file"},{foreground:"3e999f",fontStyle:"italic",token:"meta.diff.range"}],colors:{"editor.foreground":"#4D4D4C","editor.background":"#FFFFFF","editor.selectionBackground":"#D6D6D6","editor.lineHighlightBackground":"#EFEFEF","editorCursor.foreground":"#AEAFAD","editorWhitespace.foreground":"#D1D1D1"}};class l{constructor(){this._loadingInitiated=new j.X(!1),this.monacoLoaded=new H}get loaded(){return this.monacoLoaded.asObservable()}load(){this._loadingInitiated.getValue()||(this._loadingInitiated.next(!0),new Promise(t=>{const e="./assets";if("object"==typeof monaco)return void t();const o=()=>{window.require.config({paths:{vs:`${e}/monaco-editor/min/vs`}}),window.require(["vs/editor/editor.main"],()=>{t()})};if(window.require)o();else{const i=document.createElement("script");i.type="text/javascript",i.src=`${e}/monaco-editor/min/vs/loader.js`,i.addEventListener("load",o),document.body.appendChild(i)}}).then(()=>{monaco.editor.defineTheme("Tomorrow",O),this.monacoLoaded.next()}))}static#e=this.\u0275fac=function(e){return new(e||l)};static#t=this.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}const I=["editorContainer"];class m{constructor(t,e,o){this.zone=t,this.editorService=e,this.baseHref=o,this._value=JSON.stringify({},null,2),this.configChanged=new n.vpe,this._options={theme:"Tomorrow",language:"json",autoDetectHighContrast:!1,contextmenu:!1,tabSize:2,lineNumbers:"on",minimap:{autohide:!0},wordWrap:"wordWrapColumn",smoothScrolling:!0,roundedSelection:!1,scrollBeyondLastLine:!1,readOnly:!1}}ngOnInit(){this.editorService.loaded.subscribe(()=>{this.initJsonEditor()}),this.editorService.load()}initJsonEditor(){this._uri=monaco.Uri.parse("dynamic-form:config.json"),monaco.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!0,schemaValidation:"error",enableSchemaRequest:!0,schemas:[{uri:`${this.baseHref}assets/dynamic-form-schema.json`,fileMatch:[this._uri.toString()]}]});const t=monaco.editor.getModel(this._uri);t?(this._options.model=t,this._options.model.setValue(this._value)):this._options.model=monaco.editor.createModel(this._value,this._options.language,this._uri),this._editor=monaco.editor.create(this._editorContainer.nativeElement,this._options),this._editor.setValue(this._value),this._editor.onDidChangeModelContent(()=>{const e=this._editor?.getValue();this.zone.run(()=>{this._value=e||""})}),this._editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyS,()=>{this._editor?.getAction("editor.action.formatDocument").run();const e=monaco.editor.getModelMarkers({resource:this._options.model?.uri});0===e.length?this.configChanged.emit(this._value):alert(`Error on line ${e[0].startLineNumber} column ${e[0].startColumn}: `+e[0].message)}),this._editor.addCommand(monaco.KeyCode.F1,()=>{}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=h(window,"resize").subscribe(()=>this._editor?.layout())}ngOnDestroy(){this._windowResizeSubscription?.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}static#e=this.\u0275fac=function(e){return new(e||m)(n.Y36(n.R0b),n.Y36(l),n.Y36("baseHref"))};static#t=this.\u0275cmp=n.Xpm({type:m,selectors:[["app-json-editor"]],viewQuery:function(e,o){if(1&e&&n.Gf(I,7),2&e){let i;n.iGM(i=n.CRH())&&(o._editorContainer=i.first)}},inputs:{_value:"_value"},outputs:{configChanged:"configChanged"},standalone:!0,features:[n._Bn([{provide:"baseHref",useFactory:()=>window.location.href}]),n.jDz],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function(e,o){1&e&&n._UZ(0,"div",0,1)},dependencies:[k.ez],styles:["[_nghost-%COMP%]{display:block;flex-grow:1}.editor-container[_ngcontent-%COMP%]{width:99%;height:99%;margin:0 auto}"],changeDetection:0})}class g{configChanged(t){alert("Config update: "+JSON.stringify(JSON.parse(t),null,2))}static#e=this.\u0275fac=function(e){return new(e||g)};static#t=this.\u0275cmp=n.Xpm({type:g,selectors:[["app-home"]],standalone:!0,features:[n.jDz],decls:6,vars:0,consts:[[1,"flex","h-screen","flex-col"],[1,"mb-2","text-3xl","font-bold","selection:bg-amber-500","selection:text-white"],["routerLink","/html5-test",1,"text-blue-500","visited:text-blue-700"],[3,"configChanged"]],template:function(e,o){1&e&&(n.TgZ(0,"div",0)(1,"h1",1),n._uU(2," Hello, world! "),n.qZA(),n.TgZ(3,"a",2),n._uU(4,"HTML5 Test Page"),n.qZA(),n.TgZ(5,"app-json-editor",3),n.NdJ("configChanged",function(d){return o.configChanged(d)}),n.qZA()())},dependencies:[k.ez,v.Bz,v.rH,m]})}}}]);